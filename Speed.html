<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ספידומטר GPS</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #4285f4;
        --secondary-color: #34a853;
        --background-color: #ffffff;
        --text-color: #333333;
        --card-bg: #f8f9fa;
        --shadow-color: rgba(0, 0, 0, 0.1);
        --speedometer-bg: #f0f0f0;
        --needle-color: #ea4335;
        --border-color: #ddd;
      }

      .dark-mode {
        --primary-color: #8ab4f8;
        --secondary-color: #81c995;
        --background-color: #121212;
        --text-color: #e0e0e0;
        --card-bg: #1e1e1e;
        --shadow-color: rgba(0, 0, 0, 0.3);
        --speedometer-bg: #2d2d2d;
        --needle-color: #f28b82;
        --border-color: #444;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        transition: background-color 0.3s, color 0.3s;
      }

      body {
        background-color: var(--background-color);
        color: var(--text-color);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      h1 {
        color: var(--primary-color);
        font-size: 2rem;
        margin-bottom: 10px;
      }

      .mode-toggle {
        background: var(--card-bg);
        border: none;
        padding: 10px 15px;
        border-radius: 30px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-color);
        box-shadow: 0 2px 5px var(--shadow-color);
      }

      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 30px;
      }

      .btn {
        padding: 12px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px var(--shadow-color);
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn-primary {
        background-color: var(--primary-color);
        color: white;
      }

      .btn-secondary {
        background-color: var(--secondary-color);
        color: white;
      }

      .btn-outline {
        background-color: transparent;
        border: 2px solid var(--primary-color);
        color: var(--primary-color);
      }

      .scale-selector {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .scale-btn {
        padding: 10px 15px;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        cursor: pointer;
        background-color: var(--card-bg);
        color: var(--text-color);
        transition: all 0.2s;
      }

      .scale-btn.active {
        border-color: var(--primary-color);
        background-color: var(--primary-color);
        color: white;
      }

      .display-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .display-btn {
        padding: 10px 15px;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        cursor: pointer;
        background-color: var(--card-bg);
        color: var(--text-color);
        transition: all 0.2s;
      }

      .display-btn.active {
        border-color: var(--primary-color);
        background-color: var(--primary-color);
        color: white;
      }

      .dashboard {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
      }

      @media (max-width: 768px) {
        .dashboard {
          grid-template-columns: 1fr;
        }
      }

      .card {
        background-color: var(--card-bg);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 12px var(--shadow-color);
      }

      .card-title {
        font-size: 1.2rem;
        margin-bottom: 15px;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .speed-display {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
      }

      .digital-display {
        font-size: 3rem;
        font-weight: bold;
        color: var(--primary-color);
        text-align: center;
      }

      .digital-display .unit {
        font-size: 1.5rem;
        color: var(--text-color);
        opacity: 0.8;
      }

      .speedometer {
        position: relative;
        width: 100%;
        max-width: 300px;
        height: 150px;
        margin: 0 auto;
        background-color: var(--speedometer-bg);
        border-radius: 150px 150px 0 0;
        overflow: hidden;
      }

      .speedometer::before {
        content: "";
        position: absolute;
        top: 10px;
        left: 10px;
        right: 10px;
        bottom: 0;
        background-color: var(--background-color);
        border-radius: 140px 140px 0 0;
        z-index: 1;
      }

      .speedometer-scale {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 2;
      }

      .speedometer-needle {
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 4px;
        height: 70px;
        background-color: var(--needle-color);
        transform-origin: bottom center;
        transform: translateX(-50%) rotate(-90deg);
        z-index: 3;
        border-radius: 4px;
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .speedometer-center {
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 16px;
        height: 16px;
        background-color: var(--needle-color);
        border-radius: 50%;
        transform: translate(-50%, 50%);
        z-index: 4;
      }

      .speedometer-marks {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 2;
      }

      .speedometer-mark {
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 2px;
        height: 10px;
        background-color: var(--text-color);
        transform-origin: bottom center;
      }

      .speedometer-label {
        position: absolute;
        color: var(--text-color);
        font-size: 0.8rem;
        transform-origin: bottom center;
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .stat-card {
        background-color: var(--card-bg);
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        box-shadow: 0 2px 8px var(--shadow-color);
      }

      .stat-value {
        font-size: 1.8rem;
        font-weight: bold;
        color: var(--primary-color);
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-color);
        opacity: 0.8;
      }

      .map-container {
        height: 300px;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px var(--shadow-color);
        margin-bottom: 20px;
      }

      #map {
        height: 100%;
        width: 100%;
      }

      .hidden {
        display: none;
      }

      .animation-pulse {
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
        100% {
          opacity: 1;
        }
      }

      .unit-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .unit-btn {
        padding: 8px 12px;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        cursor: pointer;
        background-color: var(--card-bg);
        color: var(--text-color);
        transition: all 0.2s;
      }

      .unit-btn.active {
        border-color: var(--primary-color);
        background-color: var(--primary-color);
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div>
          <h1><i class="fas fa-tachometer-alt"></i> ספידומטר GPS</h1>
          <p>מדידת מהירות, מרחק ומיקום באמצעות GPS</p>
        </div>
        <button class="mode-toggle" id="darkModeToggle">
          <i class="fas fa-moon"></i> מצב כהה
        </button>
      </header>

      <div class="controls">
        <button id="startStopBtn" class="btn btn-primary">
          <i class="fas fa-play"></i> התחל פעילות
        </button>

        <div class="scale-selector">
          <button class="scale-btn" data-scale="walking">
            הליכה/ריצה (0-12 קמ"ש)
          </button>
          <button class="scale-btn" data-scale="bike">
            אופניים (0-40 קמ"ש)
          </button>
          <button class="scale-btn active" data-scale="car">
            רכב (0-180 קמ"ש)
          </button>
        </div>
      </div>

      <div class="unit-selector">
        <button class="unit-btn active" data-unit="kmh">קילומטר לשעה</button>
        <button class="unit-btn" data-unit="ms">מטר לשניה</button>
        <button class="unit-btn" data-unit="mph">מייל לשעה</button>
      </div>

      <div class="display-selector">
        <button class="display-btn active" data-display="digital">
          דיגיטלי
        </button>
        <button class="display-btn" data-display="analog">אנלוגי</button>
      </div>

      <div class="dashboard">
        <div class="card">
          <h2 class="card-title">
            <i class="fas fa-tachometer-alt"></i> מד מהירות
          </h2>
          <div class="speed-display">
            <div id="digitalDisplay" class="digital-display">
              0 <span class="unit">קמ"ש</span>
            </div>
            <div id="analogDisplay" class="hidden">
              <div class="speedometer">
                <div class="speedometer-scale"></div>
                <div class="speedometer-marks"></div>
                <div class="speedometer-needle"></div>
                <div class="speedometer-center"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <h2 class="card-title">
            <i class="fas fa-map-marked-alt"></i> מיקום נוכחי
          </h2>
          <div id="locationInfo">
            <p>לחץ על "התחל פעילות" כדי להתחיל מעקב</p>
          </div>
        </div>
      </div>

      <div class="stats">
        <div class="stat-card">
          <div class="stat-value" id="distance">0</div>
          <div class="stat-label">מרחק (ק"מ)</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="duration">00:00:00</div>
          <div class="stat-label">משך זמן</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="avgSpeed">0</div>
          <div class="stat-label">מהירות ממוצעת (קמ"ש)</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="maxSpeed">0</div>
          <div class="stat-label">מהירות מקסימלית (קמ"ש)</div>
        </div>
      </div>

      <h2 class="card-title"><i class="fas fa-map"></i> מפת מסלול</h2>
      <div class="map-container">
        <div id="map"></div>
      </div>
    </div>

    <script>
      // מצב תצוגה
      const darkModeToggle = document.getElementById("darkModeToggle");
      const body = document.body;

      darkModeToggle.addEventListener("click", () => {
        body.classList.toggle("dark-mode");
        if (body.classList.contains("dark-mode")) {
          darkModeToggle.innerHTML = '<i class="fas fa-sun"></i> מצב בהיר';
        } else {
          darkModeToggle.innerHTML = '<i class="fas fa-moon"></i> מצב כהה';
        }
      });

      // מצבי סקאלה
      const scaleButtons = document.querySelectorAll(".scale-btn");
      let currentScale = "car";

      scaleButtons.forEach((button) => {
        button.addEventListener("click", () => {
          scaleButtons.forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");
          currentScale = button.dataset.scale;
          updateSpeedometerScale();
        });
      });

      // מצבי תצוגה
      const displayButtons = document.querySelectorAll(".display-btn");
      const digitalDisplay = document.getElementById("digitalDisplay");
      const analogDisplay = document.getElementById("analogDisplay");
      let currentDisplay = "digital";

      displayButtons.forEach((button) => {
        button.addEventListener("click", () => {
          displayButtons.forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");
          currentDisplay = button.dataset.display;

          if (currentDisplay === "digital") {
            digitalDisplay.classList.remove("hidden");
            analogDisplay.classList.add("hidden");
          } else {
            digitalDisplay.classList.add("hidden");
            analogDisplay.classList.remove("hidden");
          }
        });
      });

      // יחידות מדידה
      const unitButtons = document.querySelectorAll(".unit-btn");
      let currentUnit = "kmh";

      unitButtons.forEach((button) => {
        button.addEventListener("click", () => {
          unitButtons.forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");
          currentUnit = button.dataset.unit;
          updateSpeedDisplay();
        });
      });

      // כפתור התחלה/עצירה
      const startStopBtn = document.getElementById("startStopBtn");
      let isTracking = false;
      let watchId = null;
      let startTime = null;
      let timerInterval = null;
      let positions = [];
      let totalDistance = 0;
      let maxSpeed = 0;

      startStopBtn.addEventListener("click", () => {
        if (!isTracking) {
          startTracking();
        } else {
          stopTracking();
        }
      });

      function startTracking() {
        if (navigator.geolocation) {
          isTracking = true;
          startStopBtn.innerHTML = '<i class="fas fa-stop"></i> עצור פעילות';
          startStopBtn.classList.remove("btn-primary");
          startStopBtn.classList.add("btn-secondary");
          startStopBtn.classList.add("animation-pulse");

          // אפס נתונים
          positions = [];
          totalDistance = 0;
          maxSpeed = 0;
          startTime = new Date();
          updateDuration();
          timerInterval = setInterval(updateDuration, 1000);

          // התחל מעקב GPS
          watchId = navigator.geolocation.watchPosition(
            (position) => updatePosition(position),
            (error) => handleGeolocationError(error),
            {
              enableHighAccuracy: true,
              maximumAge: 0,
              timeout: 5000,
            }
          );

          document.getElementById("locationInfo").innerHTML =
            "<p>מאתר את המיקום שלך...</p>";
        } else {
          alert("GPS לא נתמך בדפדפן זה.");
        }
      }

      function stopTracking() {
        isTracking = false;
        startStopBtn.innerHTML = '<i class="fas fa-play"></i> התחל פעילות';
        startStopBtn.classList.remove("btn-secondary");
        startStopBtn.classList.add("btn-primary");
        startStopBtn.classList.remove("animation-pulse");

        // עצור מעקב GPS
        if (watchId) {
          navigator.geolocation.clearWatch(watchId);
          watchId = null;
        }

        // עצור טיימר
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = null;
        }

        // עדכן מפה עם מסלול
        updateMapWithRoute();

        document.getElementById("locationInfo").innerHTML =
          '<p>מעקב הופסק. לחץ על "התחל פעילות" כדי להתחיל מעקב חדש.</p>';
      }

      function updatePosition(position) {
        const { latitude, longitude, speed, accuracy } = position.coords;
        const timestamp = new Date(position.timestamp);

        // המרת מהירות מ-m/s ל-km/h
        let currentSpeed = speed ? speed * 3.6 : 0;

        // שמור מיקום נוכחי
        positions.push({
          lat: latitude,
          lng: longitude,
          speed: currentSpeed,
          timestamp: timestamp,
        });

        // חשב מרחק מהמיקום הקודם
        if (positions.length > 1) {
          const prevPos = positions[positions.length - 2];
          const distance = calculateDistance(
            prevPos.lat,
            prevPos.lng,
            latitude,
            longitude
          );
          totalDistance += distance;
        }

        // עדכן מהירות מקסימלית
        if (currentSpeed > maxSpeed) {
          maxSpeed = currentSpeed;
          document.getElementById("maxSpeed").textContent = maxSpeed.toFixed(1);
        }

        // עדכן תצוגות
        updateSpeedDisplay(currentSpeed);
        updateLocationInfo(latitude, longitude, accuracy);
        updateStats(currentSpeed);

        // עדכן מפה
        updateMap(latitude, longitude);
      }

      function updateSpeedDisplay(speed = 0) {
        let displaySpeed, unit;

        switch (currentUnit) {
          case "ms":
            displaySpeed = speed / 3.6;
            unit = "מ/ש";
            break;
          case "mph":
            displaySpeed = speed / 1.609;
            unit = "מייל/ש";
            break;
          case "kmh":
          default:
            displaySpeed = speed;
            unit = 'קמ"ש';
            break;
        }

        if (currentDisplay === "digital") {
          document.getElementById("digitalDisplay").innerHTML = `
                    ${displaySpeed.toFixed(1)} <span class="unit">${unit}</span>
                `;
        } else {
          const needle = document.querySelector(".speedometer-needle");
          const rotation = calculateNeedleRotation(speed);
          needle.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
        }
      }

      function calculateNeedleRotation(speed) {
        let maxSpeed;

        switch (currentScale) {
          case "walking":
            maxSpeed = 12;
            break;
          case "bike":
            maxSpeed = 40;
            break;
          case "car":
          default:
            maxSpeed = 180;
            break;
        }

        // הגבל את המהירות למקסימום הסקאלה
        speed = Math.min(speed, maxSpeed);

        // חשב זווית בין -90 (0 קמ"ש) ל90 (מקסימום קמ"ש)
        return (speed / maxSpeed) * 180 - 90;
      }

      function updateSpeedometerScale() {
        const marksContainer = document.querySelector(".speedometer-marks");
        marksContainer.innerHTML = "";

        let maxSpeed, majorSteps, minorSteps;

        switch (currentScale) {
          case "walking":
            maxSpeed = 12;
            majorSteps = 6;
            minorSteps = 2;
            break;
          case "bike":
            maxSpeed = 40;
            majorSteps = 10;
            minorSteps = 5;
            break;
          case "car":
          default:
            maxSpeed = 180;
            majorSteps = 9;
            minorSteps = 20;
            break;
        }

        // הוסף סימנים קטנים
        for (let i = 0; i <= maxSpeed; i += minorSteps) {
          const mark = document.createElement("div");
          mark.className = "speedometer-mark";
          mark.style.transform = `translateX(-50%) rotate(${
            (i / maxSpeed) * 180 - 90
          }deg)`;
          marksContainer.appendChild(mark);
        }

        // הוסף תוויות לסימנים גדולים
        for (let i = 0; i <= maxSpeed; i += majorSteps) {
          const label = document.createElement("div");
          label.className = "speedometer-label";
          label.textContent = i;

          // חשב מיקום
          const angle = (i / maxSpeed) * 180 - 90;
          const radius = 120;
          const x = 50 + Math.cos((angle * Math.PI) / 180) * radius * 0.7;
          const y = 50 + Math.sin((angle * Math.PI) / 180) * radius * 0.7;

          label.style.left = `${x}%`;
          label.style.top = `${y}%`;
          label.style.transform = `translate(-50%, -50%)`;

          marksContainer.appendChild(label);
        }
      }

      function updateLocationInfo(lat, lng, accuracy) {
        document.getElementById("locationInfo").innerHTML = `
                <p><strong>קו רוחב:</strong> ${lat.toFixed(6)}</p>
                <p><strong>קו אורך:</strong> ${lng.toFixed(6)}</p>
                <p><strong>דיוק:</strong> ${Math.round(accuracy)} מטרים</p>
                <p><a href="https://maps.google.com/?q=${lat},${lng}" target="_blank">פתח ב-Google Maps</a></p>
            `;
      }

      function updateStats(currentSpeed) {
        document.getElementById("distance").textContent =
          totalDistance.toFixed(2);

        // חשב מהירות ממוצעת
        if (positions.length > 0) {
          const durationInHours = (new Date() - startTime) / (1000 * 60 * 60);
          const avgSpeed = totalDistance / durationInHours;
          document.getElementById("avgSpeed").textContent = avgSpeed.toFixed(1);
        }
      }

      function updateDuration() {
        if (!startTime) return;

        const now = new Date();
        const diff = now - startTime;

        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        document.getElementById("duration").textContent = `${hours
          .toString()
          .padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;
      }

      function updateMap(lat, lng) {
        if (!window.map) {
          initMap(lat, lng);
        } else {
          window.map.setView([lat, lng]);

          if (!window.currentMarker) {
            window.currentMarker = L.marker([lat, lng]).addTo(window.map);
          } else {
            window.currentMarker.setLatLng([lat, lng]);
          }
        }
      }

      function updateMapWithRoute() {
        if (!window.map || positions.length < 2) return;

        // צייר קו בין כל הנקודות
        const latLngs = positions.map((pos) => [pos.lat, pos.lng]);

        if (window.route) {
          window.map.removeLayer(window.route);
        }

        window.route = L.polyline(latLngs, {
          color: "#4285f4",
          weight: 4,
          opacity: 0.7,
          smoothFactor: 1,
        }).addTo(window.map);

        // הוסף סמן להתחלה ולסיום
        if (!window.startMarker) {
          window.startMarker = L.marker(latLngs[0], {
            icon: L.divIcon({
              className: "start-marker",
              html: '<i class="fas fa-play" style="color: green; font-size: 16px;"></i>',
              iconSize: [20, 20],
            }),
          }).addTo(window.map);
        }

        if (!window.endMarker) {
          window.endMarker = L.marker(latLngs[latLngs.length - 1], {
            icon: L.divIcon({
              className: "end-marker",
              html: '<i class="fas fa-stop" style="color: red; font-size: 16px;"></i>',
              iconSize: [20, 20],
            }),
          }).addTo(window.map);
        }

        // התאם את התצוגה לכל המסלול
        window.map.fitBounds(window.route.getBounds());
      }

      function initMap(lat, lng) {
        // טען את ספריית Leaflet באופן דינמי
        const script = document.createElement("script");
        script.src = "https://unpkg.com/leaflet@1.7.1/dist/leaflet.js";
        script.onload = () => {
          window.map = L.map("map").setView([lat, lng], 15);

          L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            attribution:
              '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
          }).addTo(window.map);

          window.currentMarker = L.marker([lat, lng]).addTo(window.map);
        };
        document.head.appendChild(script);

        // הוסף CSS של Leaflet
        const link = document.createElement("link");
        link.rel = "stylesheet";
        link.href = "https://unpkg.com/leaflet@1.7.1/dist/leaflet.css";
        document.head.appendChild(link);
      }

      function calculateDistance(lat1, lon1, lat2, lon2) {
        // נוסחת Haversine לחישוב מרחק בין שתי נקודות
        const R = 6371; // רדיוס כדור הארץ בק"מ
        const dLat = ((lat2 - lat1) * Math.PI) / 180;
        const dLon = ((lon2 - lon1) * Math.PI) / 180;
        const a =
          Math.sin(dLat / 2) * Math.sin(dLat / 2) +
          Math.cos((lat1 * Math.PI) / 180) *
            Math.cos((lat2 * Math.PI) / 180) *
            Math.sin(dLon / 2) *
            Math.sin(dLon / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        return R * c;
      }

      function handleGeolocationError(error) {
        let message;
        switch (error.code) {
          case error.PERMISSION_DENIED:
            message = "המשתמש סירב לבקשה לגישה למיקום.";
            break;
          case error.POSITION_UNAVAILABLE:
            message = "מידע על המיקום לא זמין.";
            break;
          case error.TIMEOUT:
            message = "בקשת המיקום עברה את זמן ההמתנה.";
            break;
          case error.UNKNOWN_ERROR:
            message = "אירעה שגיאה לא ידועה.";
            break;
        }
        document.getElementById(
          "locationInfo"
        ).innerHTML = `<p style="color: red;">שגיאה: ${message}</p>`;
      }

      // אתחל את הספידומטר
      updateSpeedometerScale();
    </script>
  </body>
</html>
